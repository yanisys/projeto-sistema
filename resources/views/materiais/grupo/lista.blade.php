@extends('layouts.default')@section('conteudo')    <div class="panel panel-default ">        <div class="panel-body">            {!! Form::open(["method" => "GET", "class" => "form-search"]) !!}            <div class="container-fluid">                <div class="col-sm-3">                    <label>Nome</label>                    {!! Form::text('nm_produto_divisao',(!empty($_REQUEST['nm_produto_divisao']) ? $_REQUEST['nm_produto_divisao'] : ""),["name" => "nm_produto_divisao", "id" => "busca_produto_divisao", "placeholder" => "Digite o nome da divisão",'class'=>'form-control']) !!}                </div>                <div class="col-sm-3 ">                    {!!  Form::submit('Buscar',['class'=>"btn btn-default margin-top-25"]) !!}                </div>            </div>            {!!  Form::hidden('tab_divisao',(!empty($_REQUEST['tab_divisao']) ? $_REQUEST['tab_divisao'] : 0),['id'=>'tab_divisao']) !!}            {!!  Form::hidden('tab_grupo',(!empty($_REQUEST['tab_grupo']) ? $_REQUEST['tab_grupo'] : 0),['id'=>'tab_grupo']) !!}            {!! Form::close() !!}        </div>    </div>    <div class="panel panel-default ">        <div class="panel-body">            <div class="col-md-4"><h3>Divisão</h3></div>            <div class="col-md-4"><h3>Grupo</h3></div>            <div class="col-md-4"><h3>Sub-Grupo</h3></div>            <div class="col-md-12 lista-produtos">                <div class="table-responsive">                    <table class="table table-hover">                        <tbody>                        <tr>                            <td  colspan="12" style="text-align: center; vertical-align: middle;">                                <button type="button" title="Clique aqui para adicionar uma nova Divisão" data-toggle="modal" data-target="#modal-grupo-produto" data-titulo="Divisão" data-nome="divisao" data-mestre="" data-nome-mestre="" class="{{ verficaPermissaoBotao('recurso.materiais/grupo-adicionar')}} btn btn-success pull-left btn-modal-grupo-produto btn-xs"><span class="fas fa-plus fa-xs"></span> Divisão</button>                            </td>                        </tr>                        @if(isset($divisao) && !$divisao->IsEmpty())                            @foreach($divisao as $keyd=>$d)                                <tr>                                    <td colspan="4"  width="33%" style="text-align: left; vertical-align: middle;">                                        <button id="btn_tr_dv_{{$keyd+1}}" type="button" title="{{$_REQUEST['tab_divisao'] === $keyd+1 ? 'Minimizar' : 'Expandir'}}" data-valor="{{$keyd+1}}" class="btn btn-primary btn-xs btn-zoom-divisao"><span class="fas fa-{{$_REQUEST['tab_divisao'] === $keyd+1 ? 'minus' : 'plus'}}-square fa-xs"></span></button>                                        {{$d->nm_produto_divisao}}                                        <button data-toggle="modal" data-superior="divisao" data-target="#modal-grupo-produto" title="Clique para adicionar um novo Grupo à Divisão {{title_case($d->nm_produto_divisao)}}" data-titulo="Grupo" data-nome="grupo" data-nome-mestre="{{title_case($d->nm_produto_divisao)}}" data-mestre="{{$d->cd_produto_divisao}}"  class="{{ verficaPermissaoBotao('recurso.materiais/grupo-adicionar')}} btn btn-success btn-xs btn-modal-grupo-produto pull-right"><span class="fas fa-plus fa-xs"></span> Grupo</button>                                        <button data-toggle="modal" data-target="#modal-grupo-produto" title="Editar Divisão" data-valor="{{$d->nm_produto_divisao}}" data-titulo="Divisão" data-nome="divisao" data-id="{{$d->cd_produto_divisao}}" class="{{ verficaPermissaoBotao('recurso.materiais/grupo-editar')}} btn btn-primary btn-xs  btn-modal-grupo-produto pull-right"><span class="fas fa-edit fa-xs"></span></button>                                        <button title="Remover Divisão" data-tabela="produto_divisao" data-chave="cd_produto_divisao" data-valor="{{$d->cd_produto_divisao}}" class="{{ verficaPermissaoBotao('recurso.materiais/grupo-excluir')}} btn btn-danger btn-xs btn-excluir pull-right"><span class="fas fa-trash fa-xs"></span></button>                                    </td>                                    <td id="tr_dv_{{$keyd+1}}"class="tr_dv" colspan="4" style="display: {{$_REQUEST['tab_divisao'] === $keyd+1 ? 'block' : 'none'}}">                                            <div class="table-responsive">                                                <table class="table table-hover">                                                    <tbody>                                                        @foreach($grupo as $keyg=>$g)                                                            @if($g->cd_produto_divisao === $d->cd_produto_divisao)                                                                <tr>                                                                    <td width="50%" style="text-align: left; vertical-align: middle;">                                                                        {{$g->nm_produto_grupo}}                                                                        <button data-toggle="modal" data-target="#modal-grupo-produto" title="Clique para adicionar um novo sub-grupo ao grupo {{title_case($g->nm_produto_grupo)}}" data-superior="grupo" data-titulo="Sub-Grupo" data-nome="sub-grupo" data-nome-mestre="{{title_case($g->nm_produto_grupo)}}" data-mestre="{{$g->cd_produto_grupo}}"  class="{{ verficaPermissaoBotao('recurso.materiais/produto-adicionar')}} btn btn-success btn-xs btn-modal-grupo-produto pull-right"><span class="fas fa-plus fa-xs"></span> Sub-Grupo</button>                                                                        <button id="btn_tr_gr_{{$keyg+1}}" type="button" title="{{$_REQUEST['tab_grupo'] === $keyg+1? 'Minimizar' : 'Expandir'}}" data-valor="{{$keyg+1}}" class="btn btn-primary pull-left btn-xs btn-zoom-grupo"><span class="fas fa-{{$_REQUEST['tab_grupo'] === $keyg+1 ? 'minus' : 'plus'}}-square fa-xs"></span></button>                                                                        <button data-toggle="modal" data-target="#modal-grupo-produto" title="Editar Grupo" data-valor="{{$g->nm_produto_grupo}}" data-nome-mestre="{{title_case($d->nm_produto_divisao)}}" data-titulo="Grupo" data-nome="grupo" data-id="{{$g->cd_produto_grupo}}" class="{{ verficaPermissaoBotao('recurso.materiais/grupo-editar')}} btn btn-primary btn-xs  btn-modal-grupo-produto pull-right"><span class="fas fa-edit fa-xs"></span></button>                                                                        <button title="Remover Grupo" data-tabela="produto_grupo" data-chave="cd_produto_grupo" data-valor="{{$g->cd_produto_grupo}}" class="{{ verficaPermissaoBotao('recurso.materiais/grupo-excluir')}} btn btn-danger btn-xs btn-excluir pull-right"><span class="fas fa-trash fa-xs"></span></button>                                                                    </td>                                                                    <td id="tr_gr_{{$keyg+1}}" class="tr_gr" style="text-align: left; vertical-align: middle; display: {{$_REQUEST['tab_grupo'] === $keyg+1 ? 'block' : 'none'}}">                                                                        @if(isset($sub_grupo) && !$sub_grupo->IsEmpty())                                                                            <div class="table-responsive">                                                                                <table class="table table-hover">                                                                                    <tbody>                                                                                    @foreach($sub_grupo as $keys => $s)                                                                                                                     @if($g->cd_produto_grupo === $s->cd_produto_grupo)                                                                                            <tr id="sg_tr_{{$keys+1}}" data-linha="{{$keys+1}}">                                                                                                <td style="text-align: left; vertical-align: middle; width: 100px">                                                                                                    {{$s->nm_produto_sub_grupo}}                                                                                                    <button data-toggle="modal" data-target="#modal-grupo-produto" title="Editar Sub-Grupo" data-valor="{{$s->nm_produto_sub_grupo}}" data-nome-mestre="{{title_case($g->nm_produto_grupo)}}" data-titulo="Sub-Grupo" data-nome="sub-grupo" data-id="{{$s->cd_produto_sub_grupo}}" class="{{ verficaPermissaoBotao('recurso.materiais/grupo-editar')}} btn btn-primary btn-xs  btn-modal-grupo-produto pull-right"><span class="fas fa-edit fa-xs"></span></button>                                                                                                    <button title="Remover Sub-Grupo" data-tabela="produto_sub_grupo" data-chave="cd_produto_sub_grupo" data-valor="{{$s->cd_produto_sub_grupo}}" class="{{ verficaPermissaoBotao('recurso.materiais/grupo-excluir')}} btn btn-danger btn-xs btn-excluir pull-right"><span class="fas fa-trash fa-xs"></span></button>                                                                                                </td>                                                                                            </tr>                                                                                        @endif                                                                                    @endforeach                                                                                    </tbody>                                                                                </table>                                                                            </div>                                                                        @endif                                                                    </td>                                                                </tr>                                                            @endif                                                        @endforeach                                                    </tbody>                                                </table>                                            </div>                                    </td>                                </tr>                            @endforeach                            @endif                        </tbody>                    </table>                </div>            </div>        </div>    </div>    <div class="row">        <div class="col-md-6">            <div class='pull-right'>@isset($lista){{  $lista->links() }}@endisset</div>        </div>    </div>    <script src="{{ js_versionado('produtos.js') }}" defer></script>    <div id="modal-grupo-produto" class="modal fade"  tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">        <div id="dialog-grupo-produto" class="modal-dialog">            <div  class="modal-content">                <div class="modal-header">                    <h3 class="modal-title" id="titulo-modal-grupo-produto"></h3>                </div>                <div class="panel-body">                    <div class="col-md-12">                        <div class="form-group">                            <label for="nome-cadastro-grupo">Informe o nome<span style="color:red">*</span></label>                            <input type="text" class="form-control" id="nome-cadastro-grupo">                        </div>                    </div>                </div>                <div class="modal-footer">                    <button type="button" class="btn btn-danger margin-top-zero pull-left" data-dismiss="modal">Sair</button>                    <button type="button" id="btn-salvar-grupo-produto" class="btn btn-success pull-right">Salvar</button>                </div>            </div>        </div>    </div>@endsection